<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.css"/>

    <title>Tiktok tool for Linh meo ðŸ’•</title>
</head>
<body>
<h1>Tiktok tool for Linh meo ðŸ’•</h1>
<div class="form-group">
    <label for="icon_selection">Icons</label>
    <select class="selectpicker form-control" id="icon_selection" multiple data-live-search="true">
    </select>
</div>
<div class="form-group">
    <label for="numberOfIcon">Number of icon</label>
    <input type="number" class="form-control" id="numberOfIcon" value="3">
</div>
<div class="form-check">
    <input class="form-check-input" type="checkbox" value="" id="addToStart">
    <label class="form-check-label" for="addToStart">
        Add to start
    </label>
</div>
<div class="form-check">
    <input class="form-check-input" type="checkbox" value="" id="addToEnd" checked>
    <label class="form-check-label" for="addToEnd">
        Add to end
    </label>
</div>
<div class="form-check">
    <input class="form-check-input" type="checkbox" value="" id="different" checked>
    <label class="form-check-label" for="different">
        Different start and end
    </label>
</div>
<form>
    <div class="form-row">
        <div class="col">
            <label for="sample">Sample</label>
            <textarea class="form-control" id="sample" rows="5"></textarea>
            <label for="result" class="mt-2">Result</label>
            <textarea class="form-control" id="result" rows="5"></textarea>
            <button type="button" data-sample="#sample" data-result="#result" class="btn btn-success generate">
                Generate
            </button>
        </div>
        <div class="col">
            <label for="sample2">Sample 2</label>
            <textarea class="form-control" id="sample2" rows="5"></textarea>
            <label for="result2" class="mt-2">Result 2</label>
            <textarea class="form-control" id="result2" rows="5"></textarea>
            <button type="button" data-sample="#sample2" data-result="#result2" class="btn btn-success generate">
                Generate 2
            </button>
        </div>
    </div>
</form>

<!--<button type="button" id="generate" class="btn btn-success">Generate</button>-->
<!--<button type="button" id="copy" class="btn btn-info">Copy</button>-->

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>
<script>
    var icons = [
        'ðŸŒ¹',
        'ðŸŒ¸',
        'ðŸŒ·',
        'ðŸŒ»',
        'ðŸ’‹',
        'ðŸŽˆ',
        'ðŸ’',
        'ðŸŽ',
        'ðŸ”®',
        'ðŸ’ƒ',
        'ðŸ’Œ',
        'ðŸŒº',
        'ðŸ’«',
        'ðŸŽŠ',
        'ðŸ’¥',
        'ðŸŒˆ',
        'ðŸ”¥',
        'ðŸŒŸ',
        'ðŸŒµ',
        'ðŸŒ²',
        'ðŸŒ³',
        'ðŸŒ´',
        'ðŸŒ±',
        'ðŸŒ¿',
        'ðŸ€',
        'ðŸƒ',
        'ðŸ„',
        'ðŸŒ¼',
        'ðŸŒˆ',
        'ðŸ­',
        'ðŸ’Ž',
        'ðŸŽ€',
        'ðŸ’œ',
        'ðŸ§¡',
        'ðŸ’›',
        'ðŸ’š',
        'ðŸ’™',
        'ðŸ’•',
        'ðŸ’ž',
        'ðŸ’“',
        'ðŸ’—',
        'ðŸ’–',
        'ðŸ’˜',
        'ðŸ’',
    ];
    var selectedIcons = icons;

    jQuery.each(icons, function (i, item) {
        $("#icon_selection").append(new Option(item, i, true, true));
    })

    let randomNumber = function () {
        return Math.floor(Math.random() * (selectedIcons.length - 1));
    }

    let randomIcon = function () {
        let result = '';
        let number = parseInt(jQuery('#numberOfIcon').val());
        number = number > 0 ? number : 3;
        for (let i = 0; i < number; i++) {
            result += selectedIcons[randomNumber()]
        }
        return result;
    }

    jQuery('.generate').click(function () {
        let sample = jQuery(jQuery(this).data('sample')).val();
        let $result = jQuery(jQuery(this).data('result'));
        let $currentButton = jQuery(this);
        let icons = randomIcon();
        if (jQuery('#addToStart').is(':checked')) {
            sample = icons + ' ' + sample;
        }

        if (jQuery('#different').is(':checked')) {
            icons = randomIcon();
        }

        if (jQuery('#addToEnd').is(':checked')) {
            sample += ' ' + icons;
        }

        $result.val(sample);
        $result.focus();
        $result.select();
        try {
            document.execCommand('copy');
            $currentButton.text('Copied');
            setTimeout(function () {
                $currentButton.text('Generate');
            }, 2000);
        } catch (err) {
            console.log('Oops, unable to copy');
        }
    });

    jQuery('#icon_selection').on('change', function () {
        selectedIcons = [];
        jQuery('#icon_selection').val().forEach(function (icon) {
            selectedIcons.push(icons[parseInt(icon)]);
        })
        if (selectedIcons.length === 0) {
            selectedIcons = icons;
        }
    });
</script>
</body>
</html>